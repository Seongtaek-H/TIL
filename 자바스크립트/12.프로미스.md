## Promise

> ìžë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ë¹„ë™ê¸°ë¥¼ ê°„íŽ¸í•˜ê²Œ ì²˜ë¦¬í• ìˆ˜ ìžˆë„ë¡ ë„ì™€ì£¼ëŠ” ì˜¤ë¸Œì íŠ¸
>
> ì •í•´ì§„ ìž¥ì‹œê°„ì˜ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ê³  ë‚˜ì„œ ì •ìƒì ìœ¼ë¡œ ê¸°ëŠ¥ì´ ìˆ˜í–‰ì´ ë˜ì–´ì¡Œë‹¤ë©´ ì„±ê³µ ë©”ì‹œì§€ì™€ ì²˜ë¦¬ëœ ê°’ì„ ì „ë‹¬
>
> ì˜ˆìƒì¹˜ ëª»í•œ ë¬¸ì œ ë°œìƒí•˜ë©´ ì—ëŸ¬ ì „ë‹¬

promise is a JavaScript object for asynchronous operation.

state: pending(ì˜¤í¼ë ˆì´ì…˜ì´ ìˆ˜í–‰ì¤‘ì¼ ë•Œ) -> fulfilled(ì˜¤í¼ë ˆì´ì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ë) or rejected (íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ ë„¤íŠ¸ì›Œí¬ ë¬¸ì œê°€ ìƒê¸°ë©´)

Producer(ì›í•˜ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•´ì„œ í•´ë‹¹í•˜ëŠ” ë°ì´í„°ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” : Promise object) vs Consumer(ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì†Œë¹„í•˜ëŠ”)

```js
// 1. Producer
// when new Promise is created, the executor runs automatically.
// ë¶ˆí•„ìš”í•œ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë“±ì„ ìˆ˜í–‰í•  ìˆ˜ ìžˆìŒ
const promise = new Promise((resolve, reject) => {
    // doing some heavy work (network, read files...)
    console.log('doing something...');
    setTimeout(() => {
        resolve('ellie');
        // reject(new Error('no network'));
    }, 2000);
});

// 2. Consumers: then, catch, finally ë¥¼ ì´ìš©í•´ì„œ ê°’ì„ ë°›ì•„ì˜¬ ìˆ˜ ìžˆìŒ
// then: í”„ë¡œë¯¸ìŠ¤ ê¸°ëŠ¥ì´ ì›í• ížˆ ì´ë£¨ì–´ì¡Œì„ ë•Œ
// catch: ì˜¤ë¥˜ ë°œìƒí–ˆì„ ë•Œ ì—ëŸ¬ë©”ì‹œì§€
// finally: ê¸°ëŠ¥ì´ ì„±ê³µí•˜ë˜ ì‹¤íŒ¨í•˜ë˜ ìˆ˜í–‰
promise
    .then((value) => {
        console.log(value);
    })
    .catch(error => {
        console.log(error);
    })
    .finally(() => {
        console.log('finally');
})

// 3. Promise chaining
const fetchNumber = new Promise((resolve, reject) => {
    setTimeout(() => resolve(1),1000);
});

fetchNumber
    .then(num => num * 2)
    .then(num => num * 3)
    .then(num => {
        return new Promise((resolve, reject) => {
            setTimeout(() => resolve(num-1),1000);
        })
    })
    .then(num => console.log(num));

// 4. Error Handling
const getHen = () =>
    new Promise((resolve, reject) => {
        setTimeout(() => resolve('ðŸ“'), 1000);
    });
const getEgg = hen =>
    new Promise((resolve, reject) => {
        setTimeout(() => reject(new Error(`error! ${hen} => ðŸ¥š`), 1000));
    });
const cook = egg =>
    new Promise((resolve, reject) => {
        setTimeout(() => resolve(`${egg} => fried egg`), 1000);
    });

// getHen()
//     .then(getEgg) //.then(hen => getEgg(hen)) 
//                   //: ì½œë°±í•¨ìˆ˜ë¥¼ ì •ì˜í• ë•Œ ë°›ì•„ì˜¤ëŠ” ë°¸ë¥˜ë¥¼ ë‹¤ë¥¸ í•¨ìˆ˜ë¡œ ë°”ë¡œ í•˜ë‚˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²½ìš° ìƒê°¹ê°€ëŠ¥
//     .then(cook) //then(egg => cook(egg))
//     .then(meal => console.log(meal));

getHen() //
.then(getEgg)
.catch(eroor => {
    return 'ë¹µ';
})
.then(cook)
.then(console.log)
.catch(console.log);
```

