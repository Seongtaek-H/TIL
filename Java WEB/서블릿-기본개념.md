## 서블릿-개념 및 생성

> 서버 쪽에서 실행되면서 클라이언트 요청에 따라 동적으로 서비스를 제공하는 자바 클래스

* 서브 쪽에서 실행되면서 여러 가지 기능(동적) 수행
* 스레드 방식으로 실행
* 컨테이너(톰캣 등)에서 실행
* 웹 브라우저(클라이언트) 요청 시 기능 수행



### 서블릿 AIP 계층 구조

<div><img src="md-images/%EC%84%9C%EB%B8%94%EB%A6%BF%EA%B3%84%EC%B8%B5%EA%B5%AC%EC%A1%B0.jpg" align=left></div>

<br>











* 서블릿 API는 Servlet 과 ServletConfig 인터페이스 구현하여 제공
* GenericServlet 추상 클래스가 두 인터페이스의 추상 메서드 구현
* HttpServlet이 GenericServlet을 상속



### 서블릿 생명주기(Life Cycle) 메서드

> 서블릿 실행 단계마다 호출되어 기능을 수행하는 콜백 메서드

| 생명주기 단계    | 호출 메서드         | 특징                                                         |
| ---------------- | ------------------- | ------------------------------------------------------------ |
| 초기화           | init()              | * 서블릿 요청 시 맨 처음 한번만 호출<br>* 서블릿 생성 시 초기화 작업을 주로 수행 |
| 서비스(작업수행) | doGet()<br>doPost() | * 서블릿 요청 시 매번 호출<br>* 실제로 클라이언트가 요청하는 작업 수행<br>* **do로 시작하는 메서드는 서블릿의 핵심기능을 처리하므로 반드시 구현** |
| 종료             | destroy()           | * 서블릿이 기능을 수행하고 메모리에서 소멸될 때 호출<br>* 서블릿의 마무리 작업을 주로 수행 |



### 사용자 정의 서블릿 만들기

* New -> Dynamic Web Project 선택 -> 이름 만들고 Next -> 마지막 페이지에서 Generate web.xml deployment descriptor 체크 -> finish
* 프로젝트 선택 후 Build Path -> Configure Build path -> Classpath -> 톰캣9 - lip - servlet-api-jar 열기 -> Aplly and Close
* New -> Class - SuperClass -> HttpServlet 선택 후 생성



### 서블릿 맵핑 - web.xml 사용

* web.xml 에서 <servlet> 태그와 <servlet-mapping> 태그 사용

  ```xml
    <servlet>
    	<servlet-name>controller</servlet-name> <!-- 매핑할 서블릿 이름 -->
    	<servlet-class>mc.sn.controller.MemberController</servlet-class> <!-- 실제로 기능을 수행할 서블릿 클래스 설정 -->
    </servlet>	
    <servlet-mapping>
    	<servlet-name>controller</servlet-name>	<!-- 서블릿 태그 안의 같은 이름으로 연결 -->
    	<url-pattern>/CmdController</url-pattern> <!-- 브라우저에서 선택된 서블릿 클래스를 대신할 이름 -->
   </servlet-mapping>      
  ```



### 서블릿 맵핑 - 어노테이션 사용

* 서블릿 클래스 내에서 @WebServlet 사용

  ```java
  @WebServlet("/LoginController") 
  public class LoginController extends HttpServlet {}
  ```

* New -> Servlet -> Class name 설정 -> URL mappings 설정 -> 오버라이딩할 생명주기 메소드 선택 -> Finish
