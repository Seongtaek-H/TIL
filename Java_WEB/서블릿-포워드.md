## 서블릿 - 포워드

> 포워드 : 하나의 서블릿에서 다른 서블릿이나 JSP와 연동하는 방법

**`Redirect - sendRedirect()`**

* 서블릿의 요청이 클라이언트의 웹브라우저를 다시 거쳐 요청되는 방식
* /first로 요청하면 sendRedirect() 를 호출해 웹 브라우저에 다시 /second를 요청

```java
@WebServlet("/first")
public class FirstServlet extends HttpServlet{
	protected void doGet(HttpServletRequest request, HttpServletResponse response) 
                                                                 throws ServletException, IOException {
      response.setContentType("text/html;charset=utf-8");
      PrintWriter out = response.getWriter();
      // sendRedirect() 를 이용해 다른 서블릿인 second로 요청
      response.sendRedirect("second");
   }
}
```

```java
@WebServlet("/second")
public class SecondServlet extends HttpServlet{
	protected void doGet(HttpServletRequest request, HttpServletResponse response)  throws  ServletException, IOException {
      response.setContentType("text/html;charset=utf-8");
      PrintWriter out = response.getWriter();

      out.println("<html><body>");
      out.println("sendRedirect를 이용한 redirect 실습");
      out.println("</body></html>");
   }
}
```



* get 방식으로 데이터 전달

```java
@WebServlet("/first")
public class FirstServlet extends HttpServlet{
	protected void doGet(HttpServletRequest request, HttpServletResponse response)  throws  ServletException, IOException {
      response.setContentType("text/html;charset=utf-8");
      PrintWriter out = response.getWriter();
      // 쿼리스트링으로 이름/값 쌍으로 데이터 전달
      response.sendRedirect("second?name=lee");
   }
}
```

```java
@WebServlet("/second")
public class SecondServlet extends HttpServlet{
	protected void doGet(HttpServletRequest request, HttpServletResponse response)  throws  ServletException, IOException {
      response.setContentType("text/html;charset=utf-8");
      PrintWriter out = response.getWriter();
      out.println("<html><body>");
      String name=request.getParameter("name");
      out.println("</body></html>");
      out.println("이름:"+name);
      out.println("<br>");
      out.println("</body></html>");
   }
}
```



**`dispatch - RequestDispatcher`**

* 웹 브라우저를 거치지 않고 서버에서 바로 포워딩 진행. URL이 변경되지 않음

```java
@WebServlet("/first")
public class FirstServlet extends HttpServlet{
	protected void doGet(HttpServletRequest request, HttpServletResponse response)  throws  ServletException, IOException { 
      request.setCharacterEncoding("utf-8");
      response.setContentType("text/html;charset=utf-8");
      
      // dispatch 방법을 이용해 second 로 전달
      RequestDispatcher dispatch = request.getRequestDispatcher("second");  
      dispatch.forward(request, response);
   }
}
```

```java
@WebServlet("/second")
public class SecondServlet extends HttpServlet{
	protected void doGet(HttpServletRequest request, HttpServletResponse response)  throws  ServletException, IOException {
      response.setContentType("text/html;charset=utf-8");
      PrintWriter out = response.getWriter();

      out.println("<html><body>");
      out.println("dispatch를 이용한 forward 실습입니다.");
      out.println("</body></html>");
   }
}
```



* get 방식으로 데이터 전달

```java
@WebServlet("/first")
public class FirstServlet extends HttpServlet{
	protected void doGet(HttpServletRequest request, HttpServletResponse response)  throws  ServletException, IOException { 
      response.setContentType("text/html;charset=utf-8");
        
      // 쿼리스트링으로 name=lee 값 전달
      RequestDispatcher dispatch = request.getRequestDispatcher("second?name=lee");  
      dispatch.forward(request, response);
   }
}
```

```java
@WebServlet("/second")
public class SecondServlet extends HttpServlet{
	protected void doGet(HttpServletRequest request, HttpServletResponse response)  throws  ServletException, IOException {
      response.setContentType("text/html;charset=utf-8");
      PrintWriter out = response.getWriter();
      
      // 다른 서블릿에서 전달된 데이터를 가져옴 (name=lee)  
      String name=request.getParameter("name");
      out.println("<html><body>");
      out.println("이름:"+name); // 이름:lee
      out.println("<br>");
      out.println("dispatch를 이용한 forward 실습입니다.");
      out.println("</body></html>");   
   }
}
```





